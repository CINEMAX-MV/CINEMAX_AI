<!DOCTYPE html>
<html lang="si">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MR.PEKSHA Offline AI Chatbot</title>
<style>
body { font-family: Arial, sans-serif; background: #121212; color: #fff; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; }
.chat-container { width: 500px; max-width: 95%; background: #1e1e1e; border-radius: 15px; padding: 20px; display: flex; flex-direction: column; box-shadow: 0 0 15px #000; }
#chat { height: 450px; overflow-y: auto; border: 1px solid #333; border-radius: 10px; padding: 10px; margin-bottom: 10px; background: #1a1a1a; scroll-behavior: smooth; }
.message { margin: 5px 0; padding: 10px 14px; border-radius: 12px; max-width: 80%; word-wrap: break-word; line-height: 1.4; opacity: 0; animation: fadeIn 0.3s forwards; }
.user { background: #007bff; align-self: flex-end; }
.bot { background: #333; align-self: flex-start; }
#typingIndicator { font-style: italic; color: #aaa; margin-bottom: 5px; display: none; }
@keyframes fadeIn { to { opacity: 1; } }
input[type="text"] { padding: 12px; border-radius: 10px; border: none; flex: 1; margin-right: 5px; background: #2c2c2c; color: #fff; }
button { padding: 12px; border: none; border-radius: 10px; background: #28a745; color: white; cursor: pointer; transition: 0.2s; }
button:hover { background: #218838; }
</style>
</head>
<body>

<div class="chat-container">
    <div id="chat"></div>
    <div id="typingIndicator">MR.PEKSHA is typing...</div>
    <div style="display: flex;">
        <input type="text" id="userInput" placeholder="‡∂î‡∂∂‡∂ú‡∑ö ‡∂¥‡∂´‡∑í‡∑Ä‡∑í‡∂©‡∂∫...">
        <button onclick="sendMessage()">Send</button>
    </div>
</div>

<script>
const chat = document.getElementById("chat");
const input = document.getElementById("userInput");
const typingIndicator = document.getElementById("typingIndicator");

// Simple offline AI logic
const knowledgeBase = [
    { q: /hello|hi|‡∑Ñ‡∑ô‡∂Ω‡∑ù|‡∑Ñ‡∂∫‡∑í/i, a: ["Hi there! üòé", "Hello! ‡∂ö‡∑ú‡∑Ñ‡∑ú‡∂∏‡∂Ø?"] },
    { q: /who made you|‡∂∏‡∑è‡∑Ä ‡∑Ñ‡∑ê‡∂Ø‡∑î‡∑Ä‡∑ö ‡∂ö‡∑Ä‡∑î‡∂Ø/i, a: ["‡∂∏‡∑è‡∑Ä ‡∑Ñ‡∑ê‡∂Ø‡∑î‡∑Ä‡∑ö MR.PEKSHA üòé"] },
    { q: /how are you|‡∂î‡∂∫‡∑è ‡∂ö‡∑ú‡∑Ñ‡∑ú‡∂∏‡∂Ø/i, a: ["‡∂∏‡∂∏ ‡∑Ñ‡∑ú‡∂≥‡∑í‡∂±‡∑ä, ‡∂î‡∂∂‡∂ß ‡∂ö‡∑ú‡∑Ñ‡∑ú‡∂∏‡∂Ø?", "‡∑Ñ‡∑ú‡∂≥‡∂∫‡∑í! ‡∂î‡∂∂‡∂ß ‡∂ö‡∑ú‡∑Ñ‡∑ú‡∂∏‡∂Ø?"] },
    { q: /weather|‡∂ö‡∑è‡∂Ω‡∂ú‡∑î‡∂´/i, a: ["‡∂∏‡∂∏ ‡∂ö‡∑è‡∂Ω‡∂ú‡∑î‡∂´ predict ‡∂ö‡∂ª‡∂±‡∑ä‡∂± ‡∂∂‡∑ê‡∑Ñ‡∑ê üòÖ", "‡∂î‡∂∫‡∑è‡∂ú‡∑ö location ‡∂Ö‡∂±‡∑î‡∑Ä ‡∂∂‡∂Ω‡∂±‡∑ä‡∂± app ‡∂ë‡∂ö‡∑ô‡∂±‡∑ä!"] },
    { q: /image: (.+)/i, a: ["‡∂î‡∂∫‡∑è image request ‡∂ö‡∂ª‡∂±‡∑Ä‡∑è üòé, ‡∂±‡∂∏‡∑î‡∂≠‡∑ä offline version ‡∂ë‡∂ö‡∑ô‡∂±‡∑ä ‡∂∏‡∂∏ image generate ‡∂ö‡∂ª‡∂±‡∑ä‡∂± ‡∂∂‡∑ê‡∑Ñ‡∑ê üòÖ"] },
];

function sendMessage() {
    const userMessage = input.value.trim();
    if (!userMessage) return;

    addMessage(userMessage, "user");
    input.value = "";

    typingIndicator.style.display = "block";

    setTimeout(() => {
        const botReply = generateReply(userMessage);
        simulateTyping(botReply);
    }, 500);
}

function generateReply(msg) {
    for (const entry of knowledgeBase) {
        if (entry.q.test(msg)) {
            return entry.a[Math.floor(Math.random()*entry.a.length)];
        }
    }
    // Default fallback - simulate AI response
    const defaultResponses = [
        "Interesting! ‡∂∏‡∂ß ‡∂≠‡∑Ä ‡∂ö‡∑í‡∂∫‡∂±‡∑ä‡∂±.",
        "Can you explain more? ü§î",
        "‡∂∏‡∂∏ ‡∂í ‡∂ú‡∑ê‡∂± ‡∂≠‡∑ö‡∂ª‡∑î‡∂∏‡∑ä ‡∂ú‡∂±‡∑ä‡∂± try ‡∂ö‡∂ª‡∂±‡∑Ä‡∑è...",
        "Wow! Tell me more.",
        "‡∂î‡∂∫‡∑è ‡∂ö‡∑í‡∂∫‡∂±‡∑Ä‡∑è ‡∂á‡∂≠‡∑ä‡∂≠‡∂Ø?"
    ];
    return defaultResponses[Math.floor(Math.random()*defaultResponses.length)];
}

async function simulateTyping(text) {
    const botDiv = document.createElement("div");
    botDiv.classList.add("message", "bot");
    chat.appendChild(botDiv);

    for (let i = 0; i < text.length; i++) {
        botDiv.innerText += text.charAt(i);
        chat.scrollTop = chat.scrollHeight;
        await new Promise(r => setTimeout(r, 25));
    }
    typingIndicator.style.display = "none";
}

function addMessage(message, sender) {
    const msgDiv = document.createElement("div");
    msgDiv.classList.add("message", sender);
    msgDiv.innerText = message;
    chat.appendChild(msgDiv);
    chat.scrollTop = chat.scrollHeight;
}

input.addEventListener("keypress", e => { if (e.key === "Enter") sendMessage(); });
</script>

</body>
</html>
